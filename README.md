# Concurrency-Porgramming #

---

*Java并发编程实战、Java并发编程的艺术、Java多线程编程核心技术中的主要知识点和代码实现*

+ volatile : 轻量级的synchronized

>多处理器开发中保证了<font color="red">共享变量</font>的`可见性`,即当一个线程改变一个共享变量时，其他的线程也能读取到这个修改的值
>java内存模型确保所有线程看到的这个变量的值是一直的

可见性保证：Lock前缀指令、缓存一致性

优化：追加字节优化性能

+ synchronized
>synchronized用的锁存于java对象头中的 *Mark Word* 区域中
>jdk1.6以后，引入了**偏向锁**和**轻量级锁**来减少获取锁和释放锁的性能消耗  
>锁四种状态：无锁状态、偏向锁状态、轻量级锁状态、重量级锁状态，状态可以升级但不可降级

+ 原子操作
**CAS:** Compare And Swap 
>CAS操作需要输入两个值，一个旧值(期望操作前)、一个新值，操作时先比较旧值是否变化，无则交换程新值，有则不操作

**java实现原子操作：** 循环CAS

循环CAS问题：
>ABA问题 ---> 使用版本号解决  
>循环时间长开销大  
>只能保证一个共享变量的原子操作  ---> 多个变量需要锁来实现